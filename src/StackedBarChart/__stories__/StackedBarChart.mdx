import {
  MultiBarChartExampleMin,
  MultiBarChartExampleSlanted,
  MultiBarChartShowValues,
  MultiBarChartTwoColumns,
  MultiBarChartTicks,
  MultiBarChartTicks2,
  MultiBarChartTooltip,
  MultiBarChartExampleThreshold,
  MultiBarChartExampleS,
  MultiBarChartExampleM,
  MultiBarChartExampleHorizontal,
  MultiBarChartUnitsLeft,
  MultiBarChartUnitsBottom,
  MultiBarChartUnitsLeftBottom,
  MultiBarChartUnitsNone,
  MultiBarChartExampleScroll,
} from './examples/StackedBarChartExample'

# StackedBarChart

Столбчатая диаграмма с группировкой: позволяет сравнивать два или несколько наборов данных друг с другом
и одновременно группировать их по времени.

Похожа на [BarChart](?path=/docs/components-barchart--with-three-columns), но в каждом столбце может быть несколько групп значений.
Это удобно для сравнения групп показателей во времени.

- [Группы и столбцы](#группы-и-столбцы)
  - [Несколько-столбцов](#несколько-столбцов)
  - [Значения у столбцов](#значения-у-столбцов)
- [Сетка](#сетка)
  - [Подписи к делениям](#подписи-к-делениям)
  - [Сколько показывать](#сколько-делений-показывать)
- [Тултип](#тултип)
- [Предельные значения](#предельные-значения)
- [Свойства графика](#свойства-графика)
  - [Размер элементов](#размер-элементов)
  - [Горизонтальный или вертикальный](#горизонтальный-или-вертикальный)
  - [Прокрутка](#прокрутка)
  - [Единицы измерения](#единицы-измерения)
- [Список свойств](#свойства)
- [Пример-использования](#пример)

## Группы и столбцы

Данные на графике показываются по группам. Это могут быть даты — день, месяц, год, квартал,
или что-то совсем другое, например, города или страны. В любом случае, группа — это параметр,
по которому сравниваются значения.

Группы и их содержимое можно описать в массиве `groups`. В него входит:

- название группы — оно будет показываться на графике (задается в `groupName`),
- описание значений для столбцов, которые будут показываться в этой группе. Задается в массиве `values`, внутри:
  - `value` — значение,
  - `color` — цвет, в который нужно покрасить отрезок столбца, отражающий это значение.

Внутри одного столбца может быть несколько отрезков разного цвета.

<MultiBarChartExampleMin />

```ts
;[
  {
    groupName: 'Q1-2016',
    values: [
      [
        { value: 30, color: 'var(--color-bg-normal)' },
        { value: 20, color: 'var(--color-bg-alert)' },
        { value: 23, color: 'var(--color-bg-warning)' },
      ],
    ],
  },
  {
    groupName: 'Q2-2016',
    values: [
      [
        { value: 1600, color: 'var(--color-bg-normal)' },
        { value: 40, color: 'var(--color-bg-alert)' },
        { value: 45, color: 'var(--color-bg-warning)' },
      ],
    ],
  },
  {
    groupName: 'Q3-2016',
    values: [
      [
        { value: 640, color: 'var(--color-bg-normal)' },
        { value: 960, color: 'var(--color-bg-alert)' },
        { value: 73, color: 'var(--color-bg-warning)' },
      ],
    ],
  },
]
```

Если название группы не влезает, его можно наклонить. Для этого добавьте `isXAxisLabelsSlanted`
(используйте только в вертикальных графиках).

<MultiBarChartExampleSlanted />

### Несколько столбцов

Вы можете добавить в группу несколько столбцов.

<MultiBarChartTwoColumns />

```ts
{
  groupName: 'Q1-2016',
  values: [
    [
      { value: 3840, color: 'var(--color-bg-normal)' },
      { value: 1920, color: 'var(--color-bg-alert)' },
    ],
    [
      { value: 230, color: 'var(--color-bg-warning)' },
      { value: 500, color: 'var(--color-bg-success)' },
    ],
  ],
}
```

### Значения у столбцов

Чтобы показать значения рядом со столбцами, добавьте `showValues`. У каждого столбца появится сумма значений.

<MultiBarChartShowValues />

## Сетка

### Сколько делений показывать

За количество делений на графике отвечает `gridTicks`.

### Подписи к делениям

Вы можете указать, как часто ставить подписи рядом с делениями: у каждого, у каждого второго, третьего и т. д.
За это отвечает `valuesTicks`.

Формат подписи указывается в `formatValueForLabel`, по умолчанию число — номер деления,
но вы можете показать что-то другое, например, процент или дату.

```tsx
gridTicks={5} //показываем 5 делений на графике
valuesTicks={2} //ставим подпись у каждого второго деления
formatValueForLabel={v => `${v}%`} //добавляем к числу в подписи знак %
```

<MultiBarChartTicks />

```tsx
gridTicks={10} // показываем 10 делений на графике
valuesTicks={2} // ставим подпись у каждого второго деления
```

<MultiBarChartTicks2 />

## Тултип

При наведении на столбец показывается тултип — всплывающее окно с дополнительной информацией об этом столбце.

Вы можете поменять формат значения в тултипе (за это отвечает свойство `formatValueForTooltip`). Например, добавить к значению единицы измерения.

```tsx
formatValueForLabel={v => `${v} тыс.`}
formatValueForTooltip={v => `${v} тысяч`}
```

<MultiBarChartTooltip />

## Предельные значения

Вы можете описать область предельных значений в объекте `threshold`:

- в `value` укажите предельное значение,
- в `color` — цвет, которым его нужно обозначить.

На графике появится пунктирная линия.

<MultiBarChartExampleThreshold />

```ts
{
  value: 750,
  color: 'var(--color-bg-normal)'
}
```

## Свойства графика

### Размер элементов

Вы можете менять размер элементов на графике с помощью свойства `size`.
Варианты: `'s'` или `'m'`.

| `size='s'`                | `size='m`'                |
| ------------------------- | ------------------------- |
| <MultiBarChartExampleS /> | <MultiBarChartExampleM /> |

### Горизонтальный или вертикальный

По умолчанию график вертикальный. Если вы укажете `isHorizontal={true}`,
график повернется на 90 градусов вправо.

| Вертикальный                       | `isHorizontal={true}`     |
| ---------------------------------- | ------------------------- |
| <MultiBarChartExampleHorizontal /> | <MultiBarChartExampleM /> |

### Прокрутка

Вы можете добавить полосу прокрутки с помощью свойства `withScroll`. Она появится, если
график не поместится по высоте в родительский контейнер. Работает только с горизонтальными
диаграммами (`isHorizontal={true}`).

### Единицы измерения

Указать единицы измерения можно в свойстве `unit`.

Вы можете расположить их как удобно, за расположение единиц отвечает `unitPosition`.
Варианты: `left`, `bottom`, `left-and-bottom`, `none`.

| `unitPosition="left"`      | `unitPosition="bottom"`      |
| -------------------------- | ---------------------------- |
| <MultiBarChartUnitsLeft /> | <MultiBarChartUnitsBottom /> |

| `unitPosition="left-and-bottom"` | `unitPosition="none"`      |
| -------------------------------- | -------------------------- |
| <MultiBarChartUnitsLeftBottom /> | <MultiBarChartUnitsNone /> |

## Свойства

<!-- props:start -->

| Свойство                                            | Тип                                         | По умолчанию | Описание                                                                          |
| --------------------------------------------------- | ------------------------------------------- | ------------ | --------------------------------------------------------------------------------- |
| [`groups`](#группы-и-столбцы)                       | [`Group[]`](#group)                         | -            | Группы значений                                                                   |
| [`gridTicks`](#сколько-делений-показывать)          | `number`                                    | -            | Количество делений на графике                                                     |
| [`valuesTicks`](#подписи-к-значениям)               | `number`                                    | -            | Когда ставить надписи рядом с делением: у каждого, у каждого второго и пр.        |
| [`unit?`](#единицы-измерения)                       | `string`                                    | -            | Единицы измерения                                                                 |
| [`unitPosition?`](#единицы-измерения)               | `left`, `bottom`, `left-and-bottom`, `none` | -            | Расположение единиц измерения                                                     |
| [`showValues?`](#значения-у-столбцов)               | `boolean`                                   | -            | Показывать значения величины столбцов                                             |
| [`isHorizontal?`](#горизонтальный-или-вертикальный) | `boolean`                                   | -            | Делает график горизонтальным                                                      |
| [`withScroll?`](#прокрутка)                         | `boolean`                                   | -            | Добавляет прокрутку по вертикали (работает только вместе с `isHorizontal = true`) |
| [`size?`](#)                                        | `'s' , 'm'`                                 | `'m'`        | Размер элементов                                                                  |
| [`threshold?`](#предельные-значения)                | [`Threshold`](#threshold)                   | -            | Предельные значения                                                               |
| [`formatValueForLabel?`](#подписи-к-значениям)      | `(value: number) => string`                 | -            | Формат для подписи к делению                                                      |
| [`formatValueForTooltip?`](#тултип)                 | `(value: number) => string`                 | -            | Формат для вывода значения в тултипе                                              |
| [`isXAxisLabelsSlanted?`](#группы-и-столбцы)        | `boolean`                                   | -            | Наклоняет подписи к столбцам вбок (работает только в вертикальных графиках)       |

### Group

| Свойство                         | Тип                             | По умолчанию | Описание                                                          |
| -------------------------------- | ------------------------------- | ------------ | ----------------------------------------------------------------- |
| [`groupName`](#группы-и-столбцы) | `string`                        | -            | Название группы столбцов                                          |
| [`values`](#группы-и-столбцы)    | `(Column[], undefined, null)[]` | -            | Столбцы в этой группе (массив с одним или несколькими значениями) |

#### Column

| Свойство                     | Тип                 | По умолчанию | Описание |
| ---------------------------- | ------------------- | ------------ | -------- |
| [`value`](#группы-и-столбцы) | `number, undefined` | -            | Значение |
| [`color`](#группы-и-столбцы) | `string`            | -            | Цвет     |

### Threshold

| Свойство                        | Тип      | По умолчанию | Описание |
| ------------------------------- | -------- | ------------ | -------- |
| [`value`](#предельные-значения) | `number` | -            | Значение |
| [`color`](#предельные-значения) | `string` | -            | Цвет     |

## Пример

```tsx
<StackedBarChart
  groups={[
    {
      groupName: 'Q1-2016',
      values: [
        [
          { value: 30, color: 'var(--color-bg-normal)' },
          { value: 20, color: 'var(--color-bg-alert)' },
          { value: 23, color: 'var(--color-bg-warning)' },
        ],
      ],
    },
    {
      groupName: 'Q2-2016',
      values: [
        [
          { value: 1600, color: 'var(--color-bg-normal)' },
          { value: 40, color: 'var(--color-bg-alert)' },
          { value: 45, color: 'var(--color-bg-warning)' },
        ],
      ],
    },
  ]}
  gridTicks={5}
  valuesTicks={1}
/>
```
