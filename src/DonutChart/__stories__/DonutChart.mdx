import {
  DonutChartExample,
  DonutChartZero,
  DonutChartZero3,
  DonutChartZeroPositive,
  DonutChartData4,
  DonutChartData40,
  DonutChartText,
  DonutChartTextTop,
  DonutChartTextRight,
  DonutChartTooltip,
  DonutChartHalfDonutTop,
  DonutChartHalfDonutBottom,
  DonutChartHalfDonutLeft,
  DonutChartHalfDonutRight,
  DonutChartLegendTop,
  DonutChartLegendRight,
  DonutChartLegendBottom,
  DonutChartLegendLeft,
  DonutChartWithArcLabels,
} from './examples/DonutChartExample'

# DonutChart

«Пончиковая диаграмма» — круговая диаграмма с пустым местом в центре. Данные представляются в виде дуг.
Нужна, чтобы показать соотношение небольшого количества категорий.

> Эта диаграмма не подходит для точного сравнения данных, на ней неудобно показывать изменения во времени.

- [Группы и линии](#группы-и-линии)
- [Текст](#текст-в-центре)
- [Тултип](#тултип)
- [Половина пончика](#половина-пончика)
- [Список свойств](#свойства)
- [Пример использования](#пример)

## Группы и линии

Цвет, величину и количество линий на диаграмме можно описать в объекте `data`. Внутри:

- `name` — название элемента,
- `color` — цвет элемента,
- `values` — значения для элемента.

Линии объединены в группы — круги. В одном круге может быть одна или несколько линий.
Кругов тоже может быть несколько, максимум 3 (иначе диаграмму будет
сложно воспринимать).

```ts
// data
;[
  {
    name: 'Северный бур',
    color: colors.first,
    values: [1, 2, 3],
  },
  {
    name: 'Южный бур',
    color: colors.second,
    values: [4, 5, 6],
  },
  {
    name: 'Западный бур',
    color: colors.third,
    values: [7, 8, 9],
  },
]
```

| Три группы, все данные      | Ноль данных, одна группа          | Ноль данных, три группы        |
| --------------------------- | --------------------------------- | ------------------------------ |
| <DonutChartExample />       | <DonutChartZero />                | <DonutChartZero3 />            |
| **Данные в одной группе**   | **Без данных по группе частично** | **Без данных по одной группе** |
| <DonutChartZeroPositive  /> | <DonutChartData4  />              | <DonutChartData40  />          |

## Текст в центре

За текст в центре «пончика» отвечает `textData`. Внутри:

- `value` — крупное число — основное значение, которое нужно показать на диаграмме
- `label` — крупный текст

Текст будет виден, если на диаграмме только один круг.

Все данные будут видны только при [`halfDonut="left"`](#половина-пончика) или [`halfDonut="right"`](#половина-пончика).

| В круге — только число | В полукруге сверху или снизу | В полукруге слева или справа |
| ---------------------- | ---------------------------- | ---------------------------- |
| <DonutChartText />     | <DonutChartTextTop />        | <DonutChartTextRight />      |

> Размер текста расчитывается автоматически до определенного минимального значения, чтобы идеально вписать текст в окружность.

## Тултип

При наведении на круг показывается тултип — всплывающее окно с информацией
обо всех линиях: название, цвет, значение.

Вы можете поменять формат значения в тултипе — за это отвечает свойство `formatValueForTooltip`.
Например, добавить к значению единицы измерения.

<DonutChartTooltip />

```ts
formatValueForTooltip={v => `${v} км`}
```

## Половина пончика

Вместо круговой диаграммы можно показать полукруг (пропорции значений сохраняются).
За это отвечает свойство `halfDonut`. Варианты: `'top'`, `'left'`, `'right'`, `'bottom'`.

| `halfDonut="top"`          | `halfDonut="bottom"`          |
| -------------------------- | ----------------------------- |
| <DonutChartHalfDonutTop /> | <DonutChartHalfDonutBottom /> |

| `halfDonut="left"`          | `halfDonut="right"`          |
| --------------------------- | ---------------------------- |
| <DonutChartHalfDonutLeft /> | <DonutChartHalfDonutRight /> |

## Легенда

**legendPosition="top"**

<DonutChartLegendTop />

**legendPosition="right"**

<DonutChartLegendRight />

**legendPosition="bottom"**

<DonutChartLegendBottom />

**legendPosition="left"**

<DonutChartLegendLeft />

## Подписи дуг окружности

<DonutChartWithArcLabels />

## Свойства

| Свойство                            | Тип                                                      | По умолчанию                                 | Описание                                                                                                                                    |
| ----------------------------------- | -------------------------------------------------------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| [`data`](#группы-и-линии)           | [`readonly DonutData[]`](#donutdata)                     | -                                            | Массив с описанием линий — данных, которые нужно представить на диаграмме                                                                   |
| [`value?`](#текст-в-центре)         | `string`                                                 | -                                            | Крупное число (основное значение)                                                                                                           |
| [`label?`](#текст-в-центре)         | `string`                                                 | -                                            | Крупный текст                                                                                                                               |
| [`halfDonut?`](#половина-пончика)   | `'top'`, `'left'`, `'right'`, `'bottom'`                 | -                                            | Показывает половинку круга                                                                                                                  |
| [`valueSize?`](#текст-в-центре)     | `number`                                                 | -                                            | Размер текста                                                                                                                               |
| [`formatValueForTooltip?`](#тултип) | `string`                                                 | -                                            | Формат значения в тултипе                                                                                                                   |
| `sums?`                             | `readonly number[]`                                      | -                                            | Массив максимальных значений для окружности, если сумма всех дуг будет меньше появится заполнитель, иначе заполнитель не будет отображаться |
| `sortValue?`                        | `((prev: DataItem, next: DataItem) => number)` \| `null` | `(prev: DataItem, next: DataItem) => number` | Метод сортировки значений, по умолчанию сортирует от большего к меньшему                                                                    |
| `legendPosition?`                   | `'top', 'right', 'left', 'bottom'`                       | -                                            | Определяет необходимость отображения легенды, и ее положение относительно графика                                                           |
| `showArcLabels?`                    | `boolean`                                                | -                                            | Показывает или скрывает отображение подписей к дугам первой окружности    |
| `formatArcLabel?`                   | `(item: ArcDataItem) => string`                          | `(item: ArcDataItem) => string`              | Метод форматирования подписей к дугам, позволяет настроить что выводить   |

### DonutData

| Свойство                   | Тип      | По умолчанию | Описание       |
| -------------------------- | -------- | ------------ | -------------- |
| [`name`](#группы-и-линии)  | `string` | -            | Название линии |
| [`color`](#группы-и-линии) | `string` | -            | Цвет линии     |
| [`value`](#группы-и-линии) | `string` | -            | Значение       |

## Пример

```tsx
import React from 'react'
import { DonutChart } from '@consta/widgets/DonutChart'

const SomeComponent = () => (
  <DonutChart
    data={[
      {
        color: 'var(--color-bg-normal)',
        name: 'Северный бур',
        values: [10, 5],
      },
      {
        color: 'var(--color-bg-alert)',
        name: 'Южный бур',
        values: [5, 10],
      },
    ]}
  />
)
```
